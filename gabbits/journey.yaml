# Simple wiki journey in gabbi yaml


tests:

- name: get empty page
  GET: /p/CleanPlate
  response_html:
      h1: CleanPlate
      form@id: editor
      title: CleanPlate

- name: write page
  POST: /p/CleanPlate
  request_headers:
      content-type: application/x-www-form-urlencoded
  data:
      content: This is MyContent
  status: 303
  response_headers:
      location: /p/CleanPlate

- name: get page
  GET: $LOCATION
  response_html:
      h1 > a: CleanPlate
      h1 > a@href: /p/CleanPlate?edit=edit
      pre: This is
      pre > a: MyContent
      pre > a@href: /p/MyContent
      pre > a@class: wikiword
  response_strings:
      - <a class="wikiword" href="/p/MyContent">MyContent</a>

- name: get existing page edit
  GET: $RESPONSE['h1 > a@href']
  response_html:
      h1: CleanPlate
      form@id: editor
      title: CleanPlate
      textarea: This is MyContent
